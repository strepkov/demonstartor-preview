<!DOCTYPE html>
<html>
    <head>
        <title>Test IDE integration</title>
        <meta charset="utf-8">
        <style>
            .box1{
                float:left;
                margin-right:0px;
            }
            .clear{
                clear:both;
            }
            .box {
                min-width:1800px;
                width: auto !important;
                width:1800px;
            }
        </style>
    </head>
<body>
    <div class="box">

        <iframe id="ide" src="onlineIDE/api/load.html?mountPoint=/" height="900" frameborder="0" scrolling="no" width="900"></iframe>

    </div>
    </div>
    <div>
        <button onclick="readAllFiles()">Read all files</button>
        <button onclick="appendFile()">Append test file</button>
    </div>
    <script>

        function readFile(){
            readFileName("text.txt");
        }

        function readFileName(name) {
            
            document.getElementById("ide").contentWindow.api.fs.readFile('/'+name,function (err, data) {
            if (err) throw err;
            console.log(name);
            console.log(data);});
        }

        function readAllFiles() {
            
            document.getElementById("ide").contentWindow.api.fs.readdir('/',function (err, data)
                    {
                        if (err) throw err;
                        data.forEach( function (item)
                            {
                                if((item.name).includes("emam")){

                                    readFileName(item.name);
                                }
                                    
                            });
                    });
        }

        function appendFile(){
            document.getElementById("ide").contentWindow.api.fs.appendFile('/testFile.emam',"some data",function (err, data) {
            if (err) throw err;
            });
        }
    </script>
</body>
</html>